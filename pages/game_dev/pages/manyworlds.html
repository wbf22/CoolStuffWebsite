<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Dev</title>
    <meta name="Game dev log on current projects">
    <link rel="stylesheet" href="manyworlds.css">

    <script src="templates/navItem.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jacquarda+Bastarda+9&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div id="startArea">
        <div id="widthSet">

            <div id="marginSet">
                <header id="title">
                    <h1>ManyWorlds</h1>
                </header>
                
    
    
                <h2>Game Dev Log</h2>
    
                <div id="navbar">
                    <ul>
                        <li><a class="contentsListItem" href="#intro">Intro</a></li>
                        <li><a class="contentsListItem" href="#terrainGen">Terrain Gen</a></li>
                    </ul>
                </div>
    
                <div id="content">
                    <div id="intro">
                        <h2>Intro</h2>
                        <p class="text">
                            I'm currently in the devlopment of this game called ManyWorlds. At least that's the working title. 
                            So far, all I've created is a minecraft style terrain gen with some differences:
                        </p>
                        <ul>
                            <li class="text">Chunks are generated by seed on demand and never saved</li>
                            <li class="text">Chunks are in a heirachy. <a href="#terrainGen">(see explanation down below)</a></li>
                            <li class="text">World height limits are -12,000 to 12,000 meters</li>
                            <li class="text">Blocks 0.8 m cubes instead of 1 m cubes (for more detail work)</li>
                            <li class="text">Erosion with lakes, streams, rivers (that flow down hill and make sense)</li>
                        </ul>
                        <p class="text">
                            Here's my current list of features that I think would be awesome:
                        </p>
                        <ul>
                            <li class="text">Worlds are in space, and there are as many worlds as there are possible seeds (you can travel and explore new worlds)</li>
                            <li class="text">Plant Generation</li>
                            <li class="text">Animal Generation</li>
                            <li class="text">Building Generation</li>
                            <li class="text">Building with blocks and other shapes</li>
                            <li class="text">Vehicle building (build a space ship!)</li>
                            <li class="text">Bone Breaking</li>
                            <li class="text">Wizardry</li>
                            <li class="text"></li>
                            <li class="text"></li>
                            <li class="text"></li>
                            <li class="text"></li>
                        </ul>
                    </div>
                    <div id="terrainGen">
                        <h2>Terrain Gen</h2>
                        <p class="text">
                            I've been doing this by using a heirachy of chunks. The first chunks I load in are 2097152 blocks wide.
                            Each of these is split into 256 chunks that are 131072 blocks wide. Each of these is also split up and split
                            up again in this heirachy:
                        </p>
                        <ul>
                            <li class="text">2097152</li>
                            <li class="text">131072</li>
                            <li class="text">8192</li>
                            <li class="text">512</li>
                            <li class="text">64</li>
                            <li class="text">16</li>
                            <li class="text">8</li>
                            <li class="text">4</li>
                            <li class="text">2</li>
                            <li class="text">1</li>
                        </ul>
                        <p class="text">
                            This has allowed me to sort of do a level of detail esk thing, where I load in a smaller amount of actual blocks nearest
                            to the player, and then load larger and larger place holders for chunks farther away. Here's one of the early renders I 
                            got working:
                        </p>
                        <img class="pic" src="../../../images/game-dev/worldGenInitial.png">
                        <p class="text">
                            Pretty cool eh! You can see that farther out in the distance the blocks are larger. This allows me to render out ~10,000m for the
                            same amount of blocks as rendering 256m in minecraft. I thought this would be nice way to allow you to see more of a long distance view in the game.
                            It does come at the cost of blockiness farther out though.
                        </p>
                        <p class="text">
                            The image above was taken before I implemented erosion or did anywork on rendering different types of blocks like grass or different kinds of rock.
                            Planning the heirachy was a bit tricky since I had to divide the chunks up evenly for each sub group. To figure this out I drew this diagram/picture which
                            I thought was actually kind of pretty to look at as well:
                        </p>
                        <img class="pic" src="../../../images/game-dev/ChunksMore.png">
                        <p class="text">
                            Here the pink squares are 512 block chunks, and then the smallest red squares are the actual blocks. The player would be in 
                            the center of this image.
                        </p>
                        <p class="text">
                            For the past few months I've been struggling with erosion which turned out to be really complicated (haha no kidding). 
                        </p>
                        <br>
                        <p class="text">
                            My basic system is the following:
                        </p>
                        <ul>
                            <li class="text">run rivers down hill</li>
                            <li class="text">create a few lakes</li>
                            <li class="text">smooth out terrain under rivers</li>
                        </ul>
                        <p class="text">
                            Sounds simple right? WRONG!!!
                        </p>
                        <br>
                        <p class="text">
                            One of the most challenging aspects of this is that I don't load in all the world chunks at once.
                        </p>
                        <p class="text">
                            I've found that I have to start at the highest level chunk, run the rivers around it's sub chunks, and at that point agree on where the rivers should connect
                            between those sub chunks. Tricky!
                        </p>
                        <p class="text">
                            Then once I start generating those sub chunks, I have to make sure I get the river to come out at the previously agreed upon point. Through many attempts and
                            stepping with the debugger, I've arrived at this system:
                        </p>
                        <ul>
                            <li class="text">Build up the edges of the chunk so rivers don't pop out the wrong side</li>
                            <li class="text">Start at each sub chunk and make a gradual downhill slope to the chunk exit</li>
                            <li class="text">Make some random lakes for fun</li>
                            <li class="text">Make the actual rivers through the chunk</li>
                            <li class="text">Make little rivers from each chunk to one of the main rivers</li>
                        </ul>
                        <p class="text">
                            Something that really helped was making a way to visualize the chunks while I was in the debugger. Since I was running the terrain gen continuously, I couldn't view
                            the terrain in the game, so I made a little tool that printed out the chunk to a file. Here's a screenshot of the output of this:
                        </p>
                        <img class="pic" src="../../../images/game-dev/Screenshot 2024-02-19 204008.png">
                        <p class="text">
                            Kind of hard to see, but the little arrows indicate the way water is flowing and the number in the bottom left of each chunk (square) is the height of that chunk. 
                            Key:
                        </p>
                        <ul>
                            <li class="text">Arrows show water flow direction</li>
                            <li class="text">Numbers next to arrows show the flow amount</li>
                            <li class="text">Number in the bottom left is the chunk height</li>
                            <li class="text">Number in the top left is the chunk index (not important)</li>
                            <li class="text">La means a chunk is a lake</li>
                        </ul>
                        <p class="text">
                            I'm still currently debugging this but as I've got to know and understand this problem I've been able to simplify my solution a lot. I've noticed with problems like
                            this, you typically have to create a failed solution so you can get to know the problem better. Then the second time around you can make a really good solution. Sometimes
                            it takes more tries than that, but usually I've never had to restart more than once (thankfully).
                        </p>


                </div>
            </div>
            
    
        </div>
    </div>
    


</body>
</html>